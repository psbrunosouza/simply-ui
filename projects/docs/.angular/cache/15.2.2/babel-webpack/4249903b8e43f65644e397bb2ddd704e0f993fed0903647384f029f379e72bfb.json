{"ast":null,"code":"\"use strict\";\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.object.define-property.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.concat.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.map.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.object.entries.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.find.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.includes.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.is-array.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.symbol.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.symbol.description.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.object.to-string.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.symbol.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.string.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.from.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.slice.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.function.name.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.preKeyupBehavior = exports.preKeydownBehavior = exports.postKeyupBehavior = exports.keyupBehavior = exports.keypressBehavior = exports.keydownBehavior = void 0;\nvar _dom = require(\"@testing-library/dom\");\nvar _utils = require(\"../../utils\");\nvar _getEventProps = require(\"../getEventProps\");\nvar _shared = require(\"../shared\");\n\n/**\n * This file should contain behavior for functional keys as described here:\n * https://w3c.github.io/uievents-code/#key-alphanumeric-functional\n */\nvar modifierKeys = {\n  Alt: 'alt',\n  Control: 'ctrl',\n  Shift: 'shift',\n  Meta: 'meta'\n};\nvar preKeydownBehavior = [].concat(_toConsumableArray(Object.entries(modifierKeys).map(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n    key = _ref2[0],\n    modKey = _ref2[1];\n  return {\n    matches: function (keyDef) {\n      return keyDef.key === key;\n    },\n    handle: function (keyDef, element, options, state) {\n      state.modifiers[modKey] = true;\n    }\n  };\n})), [\n// AltGraph produces an extra keydown for Control\n// The modifier does not change\n{\n  matches: function (keyDef) {\n    return keyDef.key === 'AltGraph';\n  },\n  handle: function (keyDef, element, options, state) {\n    var _options$keyboardMap$;\n    var ctrlKeyDef = (_options$keyboardMap$ = options.keyboardMap.find(function (k) {\n      return k.key === 'Control';\n    })) != null ? _options$keyboardMap$ : /* istanbul ignore next */\n    {\n      key: 'Control',\n      code: 'Control'\n    };\n    _dom.fireEvent.keyDown(element, (0, _getEventProps.getKeyEventProps)(ctrlKeyDef, state));\n  }\n}]);\nexports.preKeydownBehavior = preKeydownBehavior;\nvar keydownBehavior = [{\n  matches: function (keyDef) {\n    return keyDef.key === 'CapsLock';\n  },\n  handle: function (keyDef, element, options, state) {\n    state.modifiers.caps = !state.modifiers.caps;\n  }\n}, {\n  matches: function (keyDef, element) {\n    return keyDef.key === 'Backspace' && (0, _utils.isEditable)(element) && !(0, _utils.isCursorAtStart)(element);\n  },\n  handle: function (keyDef, element, options, state) {\n    var _ref3 = (0, _utils.calculateNewValue)('', element, state.carryValue, undefined, 'backward'),\n      newValue = _ref3.newValue,\n      newSelectionStart = _ref3.newSelectionStart;\n    (0, _shared.fireInputEvent)(element, {\n      newValue: newValue,\n      newSelectionStart: newSelectionStart,\n      eventOverrides: {\n        inputType: 'deleteContentBackward'\n      }\n    });\n    (0, _shared.carryValue)(element, state, newValue);\n  }\n}];\nexports.keydownBehavior = keydownBehavior;\nvar keypressBehavior = [{\n  matches: function (keyDef, element) {\n    return keyDef.key === 'Enter' && (0, _utils.isElementType)(element, 'input') && ['checkbox', 'radio'].includes(element.type);\n  },\n  handle: function (keyDef, element) {\n    var form = element.form;\n    if ((0, _utils.hasFormSubmit)(form)) {\n      _dom.fireEvent.submit(form);\n    }\n  }\n}, {\n  matches: function (keyDef, element) {\n    return keyDef.key === 'Enter' && ((0, _utils.isClickableInput)(element) ||\n    // Links with href defined should handle Enter the same as a click\n    (0, _utils.isElementType)(element, 'a') && Boolean(element.href));\n  },\n  handle: function (keyDef, element, options, state) {\n    _dom.fireEvent.click(element, (0, _getEventProps.getMouseEventProps)(state));\n  }\n}, {\n  matches: function (keyDef, element) {\n    return keyDef.key === 'Enter' && (0, _utils.isElementType)(element, 'input');\n  },\n  handle: function (keyDef, element) {\n    var form = element.form;\n    if (form && (form.querySelectorAll('input').length === 1 || (0, _utils.hasFormSubmit)(form))) {\n      _dom.fireEvent.submit(form);\n    }\n  }\n}];\nexports.keypressBehavior = keypressBehavior;\nvar preKeyupBehavior = _toConsumableArray(Object.entries(modifierKeys).map(function (_ref4) {\n  var _ref5 = _slicedToArray(_ref4, 2),\n    key = _ref5[0],\n    modKey = _ref5[1];\n  return {\n    matches: function (keyDef) {\n      return keyDef.key === key;\n    },\n    handle: function (keyDef, element, options, state) {\n      state.modifiers[modKey] = false;\n    }\n  };\n}));\nexports.preKeyupBehavior = preKeyupBehavior;\nvar keyupBehavior = [{\n  matches: function (keyDef, element) {\n    return keyDef.key === ' ' && (0, _utils.isClickableInput)(element);\n  },\n  handle: function (keyDef, element, options, state) {\n    _dom.fireEvent.click(element, (0, _getEventProps.getMouseEventProps)(state));\n  }\n}];\nexports.keyupBehavior = keyupBehavior;\nvar postKeyupBehavior = [\n// AltGraph produces an extra keyup for Control\n// The modifier does not change\n{\n  matches: function (keyDef) {\n    return keyDef.key === 'AltGraph';\n  },\n  handle: function (keyDef, element, options, state) {\n    var _options$keyboardMap$2;\n    var ctrlKeyDef = (_options$keyboardMap$2 = options.keyboardMap.find(function (k) {\n      return k.key === 'Control';\n    })) != null ? _options$keyboardMap$2 : /* istanbul ignore next */\n    {\n      key: 'Control',\n      code: 'Control'\n    };\n    _dom.fireEvent.keyUp(element, (0, _getEventProps.getKeyEventProps)(ctrlKeyDef, state));\n  }\n}];\nexports.postKeyupBehavior = postKeyupBehavior;","map":{"version":3,"mappings":"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","names":["_e","_x","_r","_arr","_n","_d","require","Object","defineProperty","exports","value","preKeyupBehavior","preKeydownBehavior","postKeyupBehavior","keyupBehavior","keypressBehavior","keydownBehavior","_dom","_utils","_getEventProps","_shared","modifierKeys","Alt","Control","Shift","Meta","entries","map","key","modKey","matches","keyDef","handle","element","options","state","modifiers","_options$keyboardMap$","ctrlKeyDef","keyboardMap","find","k","code","fireEvent","keyDown","getKeyEventProps","caps","isEditable","isCursorAtStart","calculateNewValue","carryValue","undefined","newValue","newSelectionStart","fireInputEvent","eventOverrides","inputType","isElementType","includes","type","form","hasFormSubmit","submit","isClickableInput","Boolean","href","click","getMouseEventProps","querySelectorAll","length","_options$keyboardMap$2","keyUp"],"sources":["/home/bruno/repos/libs/lib-y/node_modules/@testing-library/user-event/dist/keyboard/plugins/functional.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.preKeyupBehavior = exports.preKeydownBehavior = exports.postKeyupBehavior = exports.keyupBehavior = exports.keypressBehavior = exports.keydownBehavior = void 0;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"../../utils\");\n\nvar _getEventProps = require(\"../getEventProps\");\n\nvar _shared = require(\"../shared\");\n\n/**\n * This file should contain behavior for functional keys as described here:\n * https://w3c.github.io/uievents-code/#key-alphanumeric-functional\n */\nconst modifierKeys = {\n  Alt: 'alt',\n  Control: 'ctrl',\n  Shift: 'shift',\n  Meta: 'meta'\n};\nconst preKeydownBehavior = [// modifierKeys switch on the modifier BEFORE the keydown event\n...Object.entries(modifierKeys).map(([key, modKey]) => ({\n  matches: keyDef => keyDef.key === key,\n  handle: (keyDef, element, options, state) => {\n    state.modifiers[modKey] = true;\n  }\n})), // AltGraph produces an extra keydown for Control\n// The modifier does not change\n{\n  matches: keyDef => keyDef.key === 'AltGraph',\n  handle: (keyDef, element, options, state) => {\n    var _options$keyboardMap$;\n\n    const ctrlKeyDef = (_options$keyboardMap$ = options.keyboardMap.find(k => k.key === 'Control')) != null ? _options$keyboardMap$ :\n    /* istanbul ignore next */\n    {\n      key: 'Control',\n      code: 'Control'\n    };\n\n    _dom.fireEvent.keyDown(element, (0, _getEventProps.getKeyEventProps)(ctrlKeyDef, state));\n  }\n}];\nexports.preKeydownBehavior = preKeydownBehavior;\nconst keydownBehavior = [{\n  matches: keyDef => keyDef.key === 'CapsLock',\n  handle: (keyDef, element, options, state) => {\n    state.modifiers.caps = !state.modifiers.caps;\n  }\n}, {\n  matches: (keyDef, element) => keyDef.key === 'Backspace' && (0, _utils.isEditable)(element) && !(0, _utils.isCursorAtStart)(element),\n  handle: (keyDef, element, options, state) => {\n    const {\n      newValue,\n      newSelectionStart\n    } = (0, _utils.calculateNewValue)('', element, state.carryValue, undefined, 'backward');\n    (0, _shared.fireInputEvent)(element, {\n      newValue,\n      newSelectionStart,\n      eventOverrides: {\n        inputType: 'deleteContentBackward'\n      }\n    });\n    (0, _shared.carryValue)(element, state, newValue);\n  }\n}];\nexports.keydownBehavior = keydownBehavior;\nconst keypressBehavior = [{\n  matches: (keyDef, element) => keyDef.key === 'Enter' && (0, _utils.isElementType)(element, 'input') && ['checkbox', 'radio'].includes(element.type),\n  handle: (keyDef, element) => {\n    const form = element.form;\n\n    if ((0, _utils.hasFormSubmit)(form)) {\n      _dom.fireEvent.submit(form);\n    }\n  }\n}, {\n  matches: (keyDef, element) => keyDef.key === 'Enter' && ((0, _utils.isClickableInput)(element) || // Links with href defined should handle Enter the same as a click\n  (0, _utils.isElementType)(element, 'a') && Boolean(element.href)),\n  handle: (keyDef, element, options, state) => {\n    _dom.fireEvent.click(element, (0, _getEventProps.getMouseEventProps)(state));\n  }\n}, {\n  matches: (keyDef, element) => keyDef.key === 'Enter' && (0, _utils.isElementType)(element, 'input'),\n  handle: (keyDef, element) => {\n    const form = element.form;\n\n    if (form && (form.querySelectorAll('input').length === 1 || (0, _utils.hasFormSubmit)(form))) {\n      _dom.fireEvent.submit(form);\n    }\n  }\n}];\nexports.keypressBehavior = keypressBehavior;\nconst preKeyupBehavior = [// modifierKeys switch off the modifier BEFORE the keyup event\n...Object.entries(modifierKeys).map(([key, modKey]) => ({\n  matches: keyDef => keyDef.key === key,\n  handle: (keyDef, element, options, state) => {\n    state.modifiers[modKey] = false;\n  }\n}))];\nexports.preKeyupBehavior = preKeyupBehavior;\nconst keyupBehavior = [{\n  matches: (keyDef, element) => keyDef.key === ' ' && (0, _utils.isClickableInput)(element),\n  handle: (keyDef, element, options, state) => {\n    _dom.fireEvent.click(element, (0, _getEventProps.getMouseEventProps)(state));\n  }\n}];\nexports.keyupBehavior = keyupBehavior;\nconst postKeyupBehavior = [// AltGraph produces an extra keyup for Control\n// The modifier does not change\n{\n  matches: keyDef => keyDef.key === 'AltGraph',\n  handle: (keyDef, element, options, state) => {\n    var _options$keyboardMap$2;\n\n    const ctrlKeyDef = (_options$keyboardMap$2 = options.keyboardMap.find(k => k.key === 'Control')) != null ? _options$keyboardMap$2 :\n    /* istanbul ignore next */\n    {\n      key: 'Control',\n      code: 'Control'\n    };\n\n    _dom.fireEvent.keyUp(element, (0, _getEventProps.getKeyEventProps)(ctrlKeyDef, state));\n  }\n}];\nexports.postKeyupBehavior = postKeyupBehavior;"]},"metadata":{},"sourceType":"script","externalDependencies":[]}