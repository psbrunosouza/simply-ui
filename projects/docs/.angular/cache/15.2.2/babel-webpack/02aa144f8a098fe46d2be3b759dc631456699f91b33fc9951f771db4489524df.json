{"ast":null,"code":"'use strict';\n\nvar requirePromise = require('./requirePromise');\nrequirePromise();\nvar IsCallable = require('es-abstract/2022/IsCallable');\nvar SpeciesConstructor = require('es-abstract/2022/SpeciesConstructor');\nvar Type = require('es-abstract/2022/Type');\nvar promiseResolve = function PromiseResolve(C, value) {\n  return new C(function (resolve) {\n    resolve(value);\n  });\n};\nvar OriginalPromise = Promise;\nvar createThenFinally = function CreateThenFinally(C, onFinally) {\n  return function (value) {\n    var result = onFinally();\n    var promise = promiseResolve(C, result);\n    var valueThunk = function () {\n      return value;\n    };\n    return promise.then(valueThunk);\n  };\n};\nvar createCatchFinally = function CreateCatchFinally(C, onFinally) {\n  return function (reason) {\n    var result = onFinally();\n    var promise = promiseResolve(C, result);\n    var thrower = function () {\n      throw reason;\n    };\n    return promise.then(thrower);\n  };\n};\nvar promiseFinally = function finally_(onFinally) {\n  /* eslint no-invalid-this: 0 */\n\n  var promise = this;\n  if (Type(promise) !== 'Object') {\n    throw new TypeError('receiver is not an Object');\n  }\n  var C = SpeciesConstructor(promise, OriginalPromise); // may throw\n\n  var thenFinally = onFinally;\n  var catchFinally = onFinally;\n  if (IsCallable(onFinally)) {\n    thenFinally = createThenFinally(C, onFinally);\n    catchFinally = createCatchFinally(C, onFinally);\n  }\n  return promise.then(thenFinally, catchFinally);\n};\nif (Object.getOwnPropertyDescriptor) {\n  var descriptor = Object.getOwnPropertyDescriptor(promiseFinally, 'name');\n  if (descriptor && descriptor.configurable) {\n    Object.defineProperty(promiseFinally, 'name', {\n      configurable: true,\n      value: 'finally'\n    });\n  }\n}\nmodule.exports = promiseFinally;","map":{"version":3,"names":["requirePromise","require","IsCallable","SpeciesConstructor","Type","promiseResolve","PromiseResolve","C","value","resolve","OriginalPromise","Promise","createThenFinally","CreateThenFinally","onFinally","result","promise","valueThunk","then","createCatchFinally","CreateCatchFinally","reason","thrower","promiseFinally","finally_","TypeError","thenFinally","catchFinally","Object","getOwnPropertyDescriptor","descriptor","configurable","defineProperty","module","exports"],"sources":["/home/bruno/repos/libs/lib-y/node_modules/promise.prototype.finally/implementation.js"],"sourcesContent":["'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nrequirePromise();\n\nvar IsCallable = require('es-abstract/2022/IsCallable');\nvar SpeciesConstructor = require('es-abstract/2022/SpeciesConstructor');\nvar Type = require('es-abstract/2022/Type');\n\nvar promiseResolve = function PromiseResolve(C, value) {\n\treturn new C(function (resolve) {\n\t\tresolve(value);\n\t});\n};\n\nvar OriginalPromise = Promise;\n\nvar createThenFinally = function CreateThenFinally(C, onFinally) {\n\treturn function (value) {\n\t\tvar result = onFinally();\n\t\tvar promise = promiseResolve(C, result);\n\t\tvar valueThunk = function () {\n\t\t\treturn value;\n\t\t};\n\t\treturn promise.then(valueThunk);\n\t};\n};\n\nvar createCatchFinally = function CreateCatchFinally(C, onFinally) {\n\treturn function (reason) {\n\t\tvar result = onFinally();\n\t\tvar promise = promiseResolve(C, result);\n\t\tvar thrower = function () {\n\t\t\tthrow reason;\n\t\t};\n\t\treturn promise.then(thrower);\n\t};\n};\n\nvar promiseFinally = function finally_(onFinally) {\n\t/* eslint no-invalid-this: 0 */\n\n\tvar promise = this;\n\n\tif (Type(promise) !== 'Object') {\n\t\tthrow new TypeError('receiver is not an Object');\n\t}\n\n\tvar C = SpeciesConstructor(promise, OriginalPromise); // may throw\n\n\tvar thenFinally = onFinally;\n\tvar catchFinally = onFinally;\n\tif (IsCallable(onFinally)) {\n\t\tthenFinally = createThenFinally(C, onFinally);\n\t\tcatchFinally = createCatchFinally(C, onFinally);\n\t}\n\n\treturn promise.then(thenFinally, catchFinally);\n};\n\nif (Object.getOwnPropertyDescriptor) {\n\tvar descriptor = Object.getOwnPropertyDescriptor(promiseFinally, 'name');\n\tif (descriptor && descriptor.configurable) {\n\t\tObject.defineProperty(promiseFinally, 'name', { configurable: true, value: 'finally' });\n\t}\n}\n\nmodule.exports = promiseFinally;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,cAAc,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAEhDD,cAAc,EAAE;AAEhB,IAAIE,UAAU,GAAGD,OAAO,CAAC,6BAA6B,CAAC;AACvD,IAAIE,kBAAkB,GAAGF,OAAO,CAAC,qCAAqC,CAAC;AACvE,IAAIG,IAAI,GAAGH,OAAO,CAAC,uBAAuB,CAAC;AAE3C,IAAII,cAAc,GAAG,SAASC,cAAc,CAACC,CAAC,EAAEC,KAAK,EAAE;EACtD,OAAO,IAAID,CAAC,CAAC,UAAUE,OAAO,EAAE;IAC/BA,OAAO,CAACD,KAAK,CAAC;EACf,CAAC,CAAC;AACH,CAAC;AAED,IAAIE,eAAe,GAAGC,OAAO;AAE7B,IAAIC,iBAAiB,GAAG,SAASC,iBAAiB,CAACN,CAAC,EAAEO,SAAS,EAAE;EAChE,OAAO,UAAUN,KAAK,EAAE;IACvB,IAAIO,MAAM,GAAGD,SAAS,EAAE;IACxB,IAAIE,OAAO,GAAGX,cAAc,CAACE,CAAC,EAAEQ,MAAM,CAAC;IACvC,IAAIE,UAAU,GAAG,YAAY;MAC5B,OAAOT,KAAK;IACb,CAAC;IACD,OAAOQ,OAAO,CAACE,IAAI,CAACD,UAAU,CAAC;EAChC,CAAC;AACF,CAAC;AAED,IAAIE,kBAAkB,GAAG,SAASC,kBAAkB,CAACb,CAAC,EAAEO,SAAS,EAAE;EAClE,OAAO,UAAUO,MAAM,EAAE;IACxB,IAAIN,MAAM,GAAGD,SAAS,EAAE;IACxB,IAAIE,OAAO,GAAGX,cAAc,CAACE,CAAC,EAAEQ,MAAM,CAAC;IACvC,IAAIO,OAAO,GAAG,YAAY;MACzB,MAAMD,MAAM;IACb,CAAC;IACD,OAAOL,OAAO,CAACE,IAAI,CAACI,OAAO,CAAC;EAC7B,CAAC;AACF,CAAC;AAED,IAAIC,cAAc,GAAG,SAASC,QAAQ,CAACV,SAAS,EAAE;EACjD;;EAEA,IAAIE,OAAO,GAAG,IAAI;EAElB,IAAIZ,IAAI,CAACY,OAAO,CAAC,KAAK,QAAQ,EAAE;IAC/B,MAAM,IAAIS,SAAS,CAAC,2BAA2B,CAAC;EACjD;EAEA,IAAIlB,CAAC,GAAGJ,kBAAkB,CAACa,OAAO,EAAEN,eAAe,CAAC,CAAC,CAAC;;EAEtD,IAAIgB,WAAW,GAAGZ,SAAS;EAC3B,IAAIa,YAAY,GAAGb,SAAS;EAC5B,IAAIZ,UAAU,CAACY,SAAS,CAAC,EAAE;IAC1BY,WAAW,GAAGd,iBAAiB,CAACL,CAAC,EAAEO,SAAS,CAAC;IAC7Ca,YAAY,GAAGR,kBAAkB,CAACZ,CAAC,EAAEO,SAAS,CAAC;EAChD;EAEA,OAAOE,OAAO,CAACE,IAAI,CAACQ,WAAW,EAAEC,YAAY,CAAC;AAC/C,CAAC;AAED,IAAIC,MAAM,CAACC,wBAAwB,EAAE;EACpC,IAAIC,UAAU,GAAGF,MAAM,CAACC,wBAAwB,CAACN,cAAc,EAAE,MAAM,CAAC;EACxE,IAAIO,UAAU,IAAIA,UAAU,CAACC,YAAY,EAAE;IAC1CH,MAAM,CAACI,cAAc,CAACT,cAAc,EAAE,MAAM,EAAE;MAAEQ,YAAY,EAAE,IAAI;MAAEvB,KAAK,EAAE;IAAU,CAAC,CAAC;EACxF;AACD;AAEAyB,MAAM,CAACC,OAAO,GAAGX,cAAc"},"metadata":{},"sourceType":"script","externalDependencies":[]}