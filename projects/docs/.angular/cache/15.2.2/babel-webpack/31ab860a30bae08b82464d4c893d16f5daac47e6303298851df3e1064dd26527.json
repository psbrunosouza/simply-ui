{"ast":null,"code":"\"use strict\";\n\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.object.define-property.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.slice.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.filter.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.is-array.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.every.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.object.assign.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.symbol.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.object.to-string.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.string.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.symbol.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.symbol.description.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.some.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.string.split.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.regexp.exec.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.string.starts-with.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.string.ends-with.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.function.name.js\");\nrequire(\"/home/bruno/repos/libs/lib-y/node_modules/core-js/modules/es.array.includes.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.upload = upload;\nvar _dom = require(\"@testing-library/dom\");\nvar _click = require(\"./click\");\nvar _blur = require(\"./blur\");\nvar _focus = require(\"./focus\");\nvar _utils = require(\"./utils\");\nfunction upload(element, fileOrFiles, init) {\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n    _ref$applyAccept = _ref.applyAccept,\n    applyAccept = _ref$applyAccept === void 0 ? false : _ref$applyAccept;\n  var _input$files;\n  var input = (0, _utils.isElementType)(element, 'label') ? element.control : element;\n  if (!input || !(0, _utils.isElementType)(input, 'input', {\n    type: 'file'\n  })) {\n    throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input == null ? void 0 : input.tagName} element does not accept file uploads`);\n  }\n  if ((0, _utils.isDisabled)(element)) return;\n  (0, _click.click)(element, init == null ? void 0 : init.clickInit);\n  var files = (Array.isArray(fileOrFiles) ? fileOrFiles : [fileOrFiles]).filter(function (file) {\n    return !applyAccept || isAcceptableFile(file, input.accept);\n  }).slice(0, input.multiple ? undefined : 1); // blur fires when the file selector pops up\n\n  (0, _blur.blur)(element); // focus fires when they make their selection\n\n  (0, _focus.focus)(element); // do not fire an input event if the file selection does not change\n\n  if (files.length === ((_input$files = input.files) == null ? void 0 : _input$files.length) && files.every(function (f, i) {\n    var _input$files2;\n    return f === ((_input$files2 = input.files) == null ? void 0 : _input$files2.item(i));\n  })) {\n    return;\n  } // the event fired in the browser isn't actually an \"input\" or \"change\" event\n  // but a new Event with a type set to \"input\" and \"change\"\n  // Kinda odd...\n\n  var inputFiles = Object.assign({}, files, {\n    length: files.length,\n    item: function (index) {\n      return files[index];\n    },\n    [Symbol.iterator]: function () {\n      var i = 0;\n      return {\n        next: function () {\n          return {\n            done: i >= files.length,\n            value: files[i++]\n          };\n        }\n      };\n    }\n  });\n  (0, _dom.fireEvent)(input, (0, _dom.createEvent)('input', input, {\n    target: {\n      files: inputFiles\n    },\n    bubbles: true,\n    cancelable: false,\n    composed: true\n  }));\n  _dom.fireEvent.change(input, Object.assign({\n    target: {\n      files: inputFiles\n    }\n  }, init == null ? void 0 : init.changeInit));\n}\nfunction isAcceptableFile(file, accept) {\n  if (!accept) {\n    return true;\n  }\n  var wildcards = ['audio/*', 'image/*', 'video/*'];\n  return accept.split(',').some(function (acceptToken) {\n    if (acceptToken.startsWith('.')) {\n      // tokens starting with a dot represent a file extension\n      return file.name.endsWith(acceptToken);\n    } else if (wildcards.includes(acceptToken)) {\n      return file.type.startsWith(acceptToken.substr(0, acceptToken.length - 1));\n    }\n    return file.type === acceptToken;\n  });\n}","map":{"version":3,"mappings":"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","names":["require","Object","defineProperty","exports","value","upload","_dom","_click","_blur","_focus","_utils","element","fileOrFiles","init","_ref$applyAccept","applyAccept","_input$files","input","isElementType","control","type","TypeError","tagName","isDisabled","click","clickInit","files","Array","isArray","filter","isAcceptableFile","file","accept","slice","multiple","undefined","blur","focus","length","every","f","i","_input$files2","item","inputFiles","index","Symbol","iterator","next","done","fireEvent","createEvent","target","bubbles","cancelable","composed","change","changeInit","wildcards","split","some","acceptToken","startsWith","name","endsWith","includes","substr"],"sources":["/home/bruno/repos/libs/lib-y/node_modules/@testing-library/user-event/dist/upload.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.upload = upload;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _click = require(\"./click\");\n\nvar _blur = require(\"./blur\");\n\nvar _focus = require(\"./focus\");\n\nvar _utils = require(\"./utils\");\n\nfunction upload(element, fileOrFiles, init, {\n  applyAccept = false\n} = {}) {\n  var _input$files;\n\n  const input = (0, _utils.isElementType)(element, 'label') ? element.control : element;\n\n  if (!input || !(0, _utils.isElementType)(input, 'input', {\n    type: 'file'\n  })) {\n    throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input == null ? void 0 : input.tagName} element does not accept file uploads`);\n  }\n\n  if ((0, _utils.isDisabled)(element)) return;\n  (0, _click.click)(element, init == null ? void 0 : init.clickInit);\n  const files = (Array.isArray(fileOrFiles) ? fileOrFiles : [fileOrFiles]).filter(file => !applyAccept || isAcceptableFile(file, input.accept)).slice(0, input.multiple ? undefined : 1); // blur fires when the file selector pops up\n\n  (0, _blur.blur)(element); // focus fires when they make their selection\n\n  (0, _focus.focus)(element); // do not fire an input event if the file selection does not change\n\n  if (files.length === ((_input$files = input.files) == null ? void 0 : _input$files.length) && files.every((f, i) => {\n    var _input$files2;\n\n    return f === ((_input$files2 = input.files) == null ? void 0 : _input$files2.item(i));\n  })) {\n    return;\n  } // the event fired in the browser isn't actually an \"input\" or \"change\" event\n  // but a new Event with a type set to \"input\" and \"change\"\n  // Kinda odd...\n\n\n  const inputFiles = { ...files,\n    length: files.length,\n    item: index => files[index],\n\n    [Symbol.iterator]() {\n      let i = 0;\n      return {\n        next: () => ({\n          done: i >= files.length,\n          value: files[i++]\n        })\n      };\n    }\n\n  };\n  (0, _dom.fireEvent)(input, (0, _dom.createEvent)('input', input, {\n    target: {\n      files: inputFiles\n    },\n    bubbles: true,\n    cancelable: false,\n    composed: true\n  }));\n\n  _dom.fireEvent.change(input, {\n    target: {\n      files: inputFiles\n    },\n    ...(init == null ? void 0 : init.changeInit)\n  });\n}\n\nfunction isAcceptableFile(file, accept) {\n  if (!accept) {\n    return true;\n  }\n\n  const wildcards = ['audio/*', 'image/*', 'video/*'];\n  return accept.split(',').some(acceptToken => {\n    if (acceptToken.startsWith('.')) {\n      // tokens starting with a dot represent a file extension\n      return file.name.endsWith(acceptToken);\n    } else if (wildcards.includes(acceptToken)) {\n      return file.type.startsWith(acceptToken.substr(0, acceptToken.length - 1));\n    }\n\n    return file.type === acceptToken;\n  });\n}"]},"metadata":{},"sourceType":"script","externalDependencies":[]}